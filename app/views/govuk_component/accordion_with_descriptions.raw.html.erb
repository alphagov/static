<% js_disabled ||= false %>

<div class="govuk-accordion-with-descriptions <%= ' js-hidden' unless js_disabled %>"
  <%= ' data-module="accordion-with-descriptions"'.html_safe unless js_disabled %>>
  <% if (defined? sections) && sections.respond_to?(:each_with_index) %>
    <div class="subsection-wrapper">
      <% sections.each_with_index do |section, index| %>
        <div class="subsection">
          <% if section.name.present? %>
            <div class="subsection__header">
              <h2 class="subsection__title" id="<%= section.name.parameterize %>"><%= section.name %></h2>
              <% if section.description.present? %>
                <p class="subsection__description"><%= section.description %></p>
              <% end %>
            </div>
          <% end %>

          <div class="subsection__content" id="subsection_content_<%= index+1 %>">
            <%= yield section %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
