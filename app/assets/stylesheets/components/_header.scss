$header-height: 60px;
$govuk-heavy-link-underline-thickness: 3px;
$govuk-heavy-link-underline-offset: .1em;

// disabling for testing - @todo - remove before PR
// stylelint-disable selector-max-id
// stylelint-disable max-nesting-depth
// stylelint-disable number-leading-zero

#global-header {
  @include govuk-media-query($from: tablet) {
    height: auto;
  }

  .header-wrapper {
    padding: 0;

    .header-global {
      display: flex;
      z-index: 2;

      .header-logo {
        padding: govuk-spacing(2) 0;
        flex: 1;
        float: none;

        @include govuk-media-query($from: tablet) {
          border-bottom: none;
          margin-top: 2px;
        }

        .content {
          @include govuk-media-query($until: 325px) {
            margin-right: 0;
          }
        }
      }
    }
  }
}

// JS enhancements

.js-enabled {
  .govuk-header__super-navigation-items--mobile-only {
    display: block;

    @include govuk-media-query($from: tablet) {
      display: none;
    }
  }

  .govuk-header__super-navigation-items--from-tablet {
    display: none;

    @include govuk-media-query($from: tablet) {
      display: block;
    }
  }

  .govuk-header__super-navigation {
    display: block;
  }
}

// Generic navigation styling

.govuk-header__super-navigation {
  display: none;
}

.govuk-header__super-navigation-item {
  display: inline-flex;
  vertical-align: middle;
}

.govuk-header__super-navigation-item--hide-from-tablet {
  display: inline-flex;

  @include govuk-media-query($from: tablet) {
    display: none;
  }
}

.govuk-header__super-navigation-item--hide-on-mobile {
  display: none;

  @include govuk-media-query($from: tablet) {
    display: inline-flex;
  }
}

.govuk-header__super-navigation-link {
  @include govuk-font(24, bold, $line-height: $header-height);
  color: govuk-colour("white");
  background: none;
  border: 0;
  display: block;
  padding: 0 govuk-spacing(3);

  &:visited,
  &:link {
    text-decoration: none;
    color: govuk-colour("white");
  }

  &:hover,
  &:active {
    color: govuk-colour("white");
    text-decoration-line: underline;
    text-decoration-thickness: $govuk-heavy-link-underline-thickness;
    text-underline-offset: $govuk-heavy-link-underline-offset;
  }

  &:focus {
    @include govuk-focused-text;
  }

  @include govuk-media-query($from: tablet) {
    @include govuk-font(16, $weight: bold, $line-height: $header-height);
    height: $header-height;
  }
}

// Search button styling

.govuk-header__super-navigation-search-button {
  background-image: image-url("search-icon.svg");
  background-position: 50%;
  background-size: 35%;
  background-repeat: no-repeat;
  height: $header-height;
  width: $header-height;
  text-indent: -5000px;
  overflow: hidden;
  padding: 0;

  @include govuk-media-query($from: tablet) {
    margin-right: govuk-spacing(3);
    background-color: govuk-colour('blue');
  }
}

// mobile menu toggle

.govuk-header__super-navigation-menu-toggle {
  padding-left: govuk-spacing(3);
  border-left: 1px solid govuk-colour('mid-grey');
  border-right: 1px solid govuk-colour('mid-grey');
}

.govuk-header__super-navigation-menu-toggle-text--open {
  display: none;
}

.js-govuk-header__super-navigation-menu-toggle-button--shown {
  width: 90px;

  &.govuk-header__super-navigation-menu-toggle {
    background-color: govuk-colour('white');
    color: govuk-colour('black');
  }

  .govuk-header__super-navigation-menu-toggle-text--closed {
    display: none;
  }

  .govuk-header__super-navigation-menu-toggle-text--open {
    display: block;
  }
}

.govuk-header__super-navigation-menu--mobile {
  display: none;
  border-top: 1px solid govuk-colour('mid-grey');
  padding: govuk-spacing(2) 0;
  background-color: govuk-colour("white");
  color: govuk-colour("black");
  height: 100vh;

  .govuk-header__super-navigation-item {
    display: block;
  }

  .govuk-header__super-navigation-section-button {
    margin-bottom: govuk-spacing(1);
  }
}

.js-govuk-header__super-navigation-menu--mobile-shown {
  display: block;

  @include govuk-media-query($from: tablet) {
    display: none;
  }
}

.govuk-header__super-navigation-dropdown {
  display: none;
  position: absolute;
  top: $header-height;
  width: 100%;
  padding: govuk-spacing(8) 0;
  background-color: govuk-colour("white");
  z-index: 10;
}

.govuk-header__super-navigation-dropdown-shadow {
  display: none;
  position: fixed;
  top: -$header-height;
  width: 200vw;
  height: 120vh;
  background: govuk-colour("black");
  opacity: 0.8;
  z-index: 1;
}

.govuk-header__super-navigation-dropdown--shown,
.govuk-header__super-navigation-dropdown-shadow--shown {
  display: block;
}

.govuk-header__super-navigation-dropdown-toggle--shown {
  background: govuk-colour("white");
  color: govuk-colour("black");

  &:visited,
  &:link,
  &:hover {
    color: govuk-colour("black");
  }
}

.govuk-list .govuk-header__super-navigation-dropdown-list-item {
  @include govuk-font(19, $weight: bold);
  margin-bottom: govuk-spacing(4);

  &:hover,
  &:active {
    color: govuk-colour("white");
    text-decoration-line: underline;
    text-decoration-thickness: $govuk-heavy-link-underline-thickness;
    text-underline-offset: $govuk-heavy-link-underline-offset;
  }
}
